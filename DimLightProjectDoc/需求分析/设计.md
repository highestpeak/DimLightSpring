Android的动态样式只能使用webview了

暂时不监控Huginn的Agent的状态，Spring只是负责分发和消费消息，消息先到达Spring端点，Spring进行排序后放入**消息队列**，当Android发出消费消息的命令时，提取消息进行分发。

由于一些国外的信息无法在阿里云这样的服务器上爬取（实际上通过代理的话也可以爬取，但是我不知道如何通过代理做这个事情；另一方面，我的阿里云服务器部署这博客等程序，害怕由于这样的服务停止了我的服务器）。现在的策略是：在本地通过UI客户端的SSR，爬取下来后保存到本地的数据库，然后远端定期拉取这些信息。远端公网服务器只是一个 broker 中转的作用了。

因为我不想自己写一个java上的不断检测rss更新的工具，所以先用huginn来检测，然后huginn来触发我的服务器的队列，队列保存下来信息。

https://datatube.dev/cn

---

写这个文档的目的是为了明确要做什么。

我现在知道要做的是：

- 做出好的Android阅读器
- 🔴 huginn上添加agent，能够产生输出，输出能够发送到特定端点
  - 先不管是什么，暂时先输出各类型的信息试一试，例如：视频、论坛、博客、社交媒体

---

rss 2.0

找到一个 Feed 的通用的结构：

- 一个 RSS 地址(**Feed URL**)是一个 RSS Channel，一个 RSS FEED URL 会产生多个消息Item，即RSS Item，一个RSS Item可以有不同的解析方式

``` bash
# RSS来源(可以添加的RSS订阅)（用户可控的）
# 必要的
URL、title（用户输入的）、description（用户输入的）、title（提取xml的）、description（提取xml的）、link、
image（由用户设定，可以选择是解析xml中的图片还是自己设定，只需要图片URL）、generator（用户输入的）、type（指的是“视频、论坛、博客、社交媒体”，设定好的一些type，可以被继承到该RSS来源产生到的信息里）
# 可选的（除item外，所有的标签，都提取出来，保存到一个额外字段）
copyright、pubDate、ttl、language、generator、category
# ------------------------------------------------------------
# 针对不同类型的来源：例如UGC、博客、爬虫、杂志等做进一步的小处理（打标签）

# 一条信息（自动生成的）
# 必要的
title、description、link、guid、pubDate、author（可以从RSS来源继承，也可以解析item的标签，也可以用户指定）
# 可选的（除必要的标签外，所有的标签，都提取出来，保存到一个额外字段）
category、comments
# ------------------------------------------------------------
# 最终发送到终端的信息会含有额外的信息：例如打上来源的名称的标签、等等

# RSS爬取任务（一个RSS来源必须对应一个任务，一个任务可以不对应一个RSS来源，这个任务可以是聚合任务）（用户可控的）
schedule（给几个可以选择的时长，学习huginn）、title、description、lifeCycle（生命周期，可以存活多长时间，设置来保证可以一个短的时间段内有用的任务）、cacheCycle（缓存信息保存多长时间）、
autoDownload（自动下载新数据：boolean 是/否）
startDate（可以算出age等）、lastEvent（上次任务时间）、EventsCreated（创造的任务的数量）
# 任务像huginn一样可以扩散等，可以画出一个图来，但是也应该避免成为环

# 主题订阅（用户可控的）（编程的，对信息进行自动操作的，但是是根据不同RSS来源来写的逻辑，这个地方可以编程操作）
# （输入信息并且输出到不同的队列，相当于一个分组）
title、description、type
```

---

- 任务应该可以被立刻触发
- 流程是：RSS爬取任务被触发，产生信息，信息经过主题订阅和一个信息处理步骤进入第一步信息处理，产生新的信息，新的信息进入第二步信息处理，产生新的信息（具体过程可能根据不同的信息来源类型而不一样）
  - 如果要写好，还需要视不同的信息类型而定
  - 信息处理应当是“服务”，是在不同的分布式节点上的，当然也可以在本机上，这里可以对在本机上和通过网络连接做一个不同的优化处理，毕竟在本机也用http好像会慢一点，资源多一点（毕竟不是人人都有好的服务器）
  - 信息处理是一种算法，这种算法可以被插入到不同的处理过程上，针对这个有算法管理
- 一个信息流的顺序也是重要的
- safari 阅读模式



```
//    /**
//     * 论坛
//     */
//    BBS,
//
//    /**
//     * 博客
//     */
//    BLOG,
//
//    /**
//     * 杂志
//     */
//    MAGAZINE,
//
//    /**
//     * 图片
//     */
//    PICTURE,
//
//    /**
//     * 社交网络
//     */
//    SOCIAL_MEDIA,
//
//    /**
//     * 自写爬虫
//     */
//    SPIDER,
//
//    /**
//     * 各平台的用户创作
//     */
//    UGC,
//
//    /**
//     * 视频
//     */
//    VIDEO;
```



可以像chrome一样使用插件，现成的油猴脚本插件





- 现在完全可以暂时不写我的定时逻辑，直接用 huginn 来完成定时逻辑，让huginn来触发定时



```
综合采用在线站点提供的全文rss输出服务，即并行的执行自己的算法和在线服务的api
```